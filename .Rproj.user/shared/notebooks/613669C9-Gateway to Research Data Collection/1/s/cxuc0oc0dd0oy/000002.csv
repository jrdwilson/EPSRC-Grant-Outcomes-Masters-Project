"0","# Pull the list of errorred projects row numbers"
"0","errorred_projects <- error_project_df$i"
"0","# Back up dataframe incase of an issue"
"0","ep_df_bkup <- error_project_df"
"0",""
"0","# Empty error capture dataframe"
"0","error_project_df <- tibble("
"0","  i = numeric(),"
"0","  url = character(),"
"0",")"
"0",""
"0","# init progress bar"
"0","prog_bar_len <- length(errored_projects)"
"0","prog_bar <- progress_bar$new(format = ""[:bar] :current/:total -:percent complete - :elapsedfull - eta = :eta"","
"0","                             total = prog_bar_len)"
"0",""
"0","# start logging"
"0","log_file_dest <- paste0(""../logs/"", format(Sys.time(), ""%Y%m%d_%H%M%S_""), ""Errored_Project_Retry_log.log"")"
"0","log_file <- log_open(log_file_dest, logdir = FALSE)"
"0",""
"0","for (i in errored_projects) {"
"0","  get_project_info(i)"
"0","  # add extra sleep for safety"
"0","  Sys.sleep(5)"
"0","}"
"1","Data collection from https://gtr.ukri.org/projects?ref=EP/V026097/1 at 13:22:02 failed: 
Error in open.connection(con, ""rb""): HTTP error 404.
 
Waiting 5 minutes before resuming."
"1","
"
"1","Data collection from https://gtr.ukri.org/projects?ref=studentship-2283917 at 13:27:11 failed: 
Error in open.connection(con, ""rb""): HTTP error 404.
 
Waiting 5 minutes before resuming."
"1","
"
"2",""
"2","[============================>---------------------------------------------------------] 2/6 - 33% complete - 00:05:08 - eta = 10m"
"1","Data collection from https://gtr.ukri.org/projects?ref=studentship-2487892 at 13:32:20 failed: 
Error in open.connection(con, ""rb""): HTTP error 404.
 
Waiting 5 minutes before resuming."
"1","
"
"2",""
"2","[==========================================>-------------------------------------------] 3/6 - 50% complete - 00:10:17 - eta = 10m"
"1","Data collection from https://gtr.ukri.org/projects?ref=studentship-2492634 at 13:37:29 failed: 
Error in open.connection(con, ""rb""): HTTP error 404.
 
Waiting 5 minutes before resuming."
"1","
"
"2",""
"2","[========================================================>-----------------------------] 4/6 - 67% complete - 00:15:26 - eta =  8m"
"1","Data collection from https://gtr.ukri.org/projects?ref=studentship-2487886 at 13:42:37 failed: 
Error in open.connection(con, ""rb""): HTTP error 404.
 
Waiting 5 minutes before resuming."
"1","
"
"2",""
"2","[=======================================================================>--------------] 5/6 - 83% complete - 00:20:34 - eta =  4m"
"1","Data collection from https://gtr.ukri.org/projects?ref=studentship-1969350 at 13:47:46 failed: 
Error in open.connection(con, ""rb""): HTTP error 404.
 
Waiting 5 minutes before resuming."
"1","
"
"2",""
"2","[======================================================================================] 6/6 -100% complete - 00:25:43 - eta =  0s"
"2","                                                                                                                                  "
"2",""
"0","person_df_mutated <- person_df %>% "
"0","  rowwise() %>% "
"0","  mutate(role = paste(pull(role), collapse = "",""))"
"0",""
"0","organisation_df_mutated <- organisation_df %>% "
"0","  rowwise() %>% "
"0","  mutate(role = paste(pull(role), collapse = "",""))"
"0",""
"0","# save and log data frames"
"0","person_df_mutated %>% write.csv(""../data/person_df.csv"")"
"0","log_print(""person_df.csv saved"")"
"1","[1]"
"1"," ""person_df.csv saved"""
"1","
"
"0","organisation_df_mutated %>% write.csv(""../data/organisation_df.csv"")"
"0","log_print(""organisation_df.csv saved"")"
"1","[1]"
"1"," ""organisation_df.csv saved"""
"1","
"
"0","subject_df %>% write.csv(""../data/subject_df.csv"")"
"0","log_print(""subject_df.csv saved"")"
"1","[1]"
"1"," ""subject_df.csv saved"""
"1","
"
"0","topic_df %>% write.csv(""../data/topic_df.csv"")"
"0","log_print(""topic_df.csv saved"")"
"1","[1]"
"1"," ""topic_df.csv saved"""
"1","
"
"0","project_df %>% write.csv(""../data/project_df.csv"")"
"0","log_print(""project_df.csv saved"")"
"1","[1]"
"1"," ""project_df.csv saved"""
"1","
"
"0","# Close log"
"0","log_close()"
"0",""
